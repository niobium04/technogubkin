  
![Logo](https://www.tadviser.ru/images/0/0c/%D0%97%D0%B0%D1%80%D1%83%D0%B1%D0%B5%D0%B6%D0%BD%D0%B5%D1%84%D1%82%D1%8C.png)


# Привет! Мы - команда "Техногубкин"
Студенты РГУ нефти и газа (НИУ) им. И.М.Губкина

Представляем наше решение оналйн-хакатона NESTRO CHALLENGE 2023

«Прогнозирование отказов трубопроводов по
данным технологического режима эксплуатации»
## Краткое описание

Проект предназначен для разработки общей методологии предсказания возможных отказов трубопроводов, анализа закономерности  последствий неблагоприятных режимов эксплуатации трубопроводов и степени их влияния на износ трубопровода.

## Необходимые условия для использования продукта

- Наличие локальной среды программирования Python 3
- Наличие Microsoft Excel или любой аналогичной программы для работы с электронными таблицами
- Наличие браузера

## Описание файлов репозитория

- Папка static - содержит статичные файлы, такие как изображения, CSS-файлы, JavaScript-файлы и другие файлы, которые не требуют обработки на сервере
- Папка templates - содержит шаблон HTML-файла, который используется для генерации динамического контента на веб-странице
- data_chemical.xlsx - физико-химические свойства нефти (Приложение 1)
- data.xlsx - данные о потоке нефти, газа и воды по каждому трубопроводу (Приложение 2)
- ингибируемые.xlsx - данные об ингибируемых трубах
- main.py - python-файл, являющийся кодом Flask-приложения, которое предоставляет веб-интерфейс для расчета и визуализации данных с использованием библиотеки Pandas и функций из файла functions.py
- functions.py - python-файл, в котором определена функция f, которая выполняет ряд вычислений на основе предоставленных данных

## Как начать работу?

1. Скачать все файлы из репозитория и поместить их в одну папку
2. Открыть файл main.py
3. Загрузить все необходимые библиотеки и модули
4. Запустить код
5. Открыть браузер и вбить в адресную строку: http://127.0.0.1:5000
6. Выбрать название трубы и год
7. В поле "Загрузите первый Excel Файл" выбрать файл data.xlsx
8. В поле "Загрузите второй Excel Файл" выбрать файл data_chemical.xlsx
9. Нажать кнопку "Запустить код"

## Описание програмного кода

Подключаем все необходимые пакеты и модули с помощью команды import:
```python
import pandas as pd
import math
from matplotlib import pyplot as plt
import matplotlib.patches as patches
```

Функция f принимает на вход параметры, выбранные пользователем, считывает данные из загруженных таблиц и производит вычисления:
```python
def f(your_choice, your_choice_year, df, df1):
```

Коэффициенты, необходимые для вычисления максимальной скорости коррозии, выбираются с помощью условного оператора if:
```python
if otnoshenie > 1.2:
    kk = 0.06
elif d <= 377:
    ind = 0
    index = 10000
    for i in massiv:
        if i == otnoshenie:
            index = ind
        ind += 1
    if index == 10000:
        kk = 0.06
    else:
        kk = d377[index]
```

Подсказка о необходимости использования ингибитора появляется, если скорость коррозии в трубопроводе превышает 0,3 мм/год, выбранный трубопровод не находится в списке ингибируемых:
```python
if v_korosia > 0.3:
    rezim_tech = "коррозионный"
    if your_choice in truba_list:
        rezim_tech = "коррозионный"
    else:
        rezim_tech = "коррозионный, установите ингибитор"
else:
    rezim_tech = "антикоррозионный"
```

Режим течения определяется по числу Рейнольдса (renolds), с помощью условного оператора if:
```python
if renolids > 2300:
    rezim = "Турбулентный режим"
elif renolids > 2100:
    rezim = "Переходный режим"
if renolids < 2100:
    rezim = "Ламинарный режим"
```

Функция create_figure стоит столбчатую диаграмму для трубопроводов с наибольшим износом в выбранном году:
```python
def create_figure(your_choice_year):
```

## Использованные средства разработки

- pandas - библиотека для обработки и анализа данных
- math - модуль для математических вычислений
- matplotlib - библиотека для визуализации данных
- pyplot - модуль из библиотеки matplotlib для создания графиков
- patches - модуль из библиотеки matplotlib для создания графических примитивов
- xlrd - библиотека для чтения данных из файлов формата Excel
- openpyxl - библиотека для работы с файлами формата Excel
- numpy - библиотека для работы с массивами и матрицами
- scipy - библиотека для научных и инженерных расчетов
- flask - это фреймворк для создания веб-приложений на языке программирования Python

## Описание полученного результата

- После выбора всех параметров и запуска программы, в окнах Qн, Qг, Qв, P, T появятся соответствующие значения, взятые из таблицы Приложение 2

- В окне "Режим течения трубопровода" будет указан режим работы трубопровода в выбранный год: ламинарный или турбулентный, корозионный или антикорозионный. В случае, если режим корозионный, появится рекомендация по использованию ингибитора

- В окнах "Скорость движения жидкой фазы", "Критическая скорость перехода в расслоенный режим", "Критическая скорость расслоенного потока" выводятся соответствующие скорости, рассчитанные на основе формул. Значения скорости коррозии, накопленного износа и остаточного ресурса так же вычисляются согласно инструкции по проектированию и эксплуатации антикоррозионной защиты трубопроводов систем нефтегазосбора (РД 39-0147323-339-89-Р)

- В нижней части страницы выводится столбчатая диаграмма, на которой обозначаются трубопроводы с наибольшим износом на момент времени выбранного года. Названия трубопроводов указаны по оси абсцисс, накопленный износ (%) - по оси ординат

### Приятного использования!






## Состав Команды

- [Анастасия Шелякина](https://vk.com/anastasiya__shelyakina)
- [Даниил Жуланов](https://vk.com/daniaot)
- [Игорь Кобелев](https://vk.com/igorkobelev04)

